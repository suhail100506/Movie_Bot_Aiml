<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineScope - Movie Discovery</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1><span class="brand-highlight">MMDB</span></h1>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link active">Movies</a>
                <a href="#" class="nav-link">TV Shows</a>
                <a href="#" class="nav-link">People</a>
                <a href="#" class="nav-link">More</a>
            </div>
            <div class="nav-right">
                <button class="nav-icon-btn">+</button>
                <select class="language-selector" id="languageSelect">
                    <option value="en-US">EN</option>
                    <option value="hi-IN">HI</option>
                    <option value="ta-IN">TA</option>
                </select>
                <button class="nav-icon-btn">üîî</button>
                <div class="user-avatar">M</div>
                <button class="nav-icon-btn search-btn">üîç</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container">
        <div class="content-wrapper">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="filter-section">
                    <div class="filter-header">
                        <h3>Sort</h3>
                        <span class="arrow">‚Ä∫</span>
                    </div>
                </div>

                <div class="filter-section">
                    <div class="filter-header">
                        <h3>Where To Watch</h3>
                        <span class="badge">79</span>
                        <span class="arrow">‚Ä∫</span>
                    </div>
                </div>

                <div class="filter-section">
                    <div class="filter-header collapsible">
                        <h3>Filters</h3>
                        <span class="arrow-down">‚Ä∫</span>
                    </div>
                    <div class="filter-content">
                        <div class="filter-group">
                            <h4>Show Me</h4>
                            <label class="radio-option">
                                <input type="radio" name="showMe" value="all" checked>
                                <span>Everything</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="showMe" value="notSeen">
                                <span>Movies I Haven't Seen</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="showMe" value="seen">
                                <span>Movies I Have Seen</span>
                            </label>
                        </div>

                        <div class="filter-group">
                            <h4>Availabilities</h4>
                            <label class="checkbox-option">
                                <input type="checkbox" id="searchAllAvailabilities">
                                <span>Search all availabilities?</span>
                            </label>
                        </div>

                        <div class="filter-group">
                            <h4>Release Dates</h4>
                            <label class="checkbox-option">
                                <input type="checkbox" id="searchAllReleases">
                                <span>Search all releases?</span>
                            </label>
                            <div class="date-inputs">
                                <label>from</label>
                                <input type="date" class="date-input" placeholder="undefined">
                                <label>to</label>
                                <input type="date" class="date-input" placeholder="undefined">
                            </div>
                        </div>

                        <div class="filter-group">
                            <h4>Genres</h4>
                            <div class="genre-tags" id="genreTags">
                                {% for genre in genres[:10] %}
                                <button class="genre-tag" data-id="{{ genre.id }}">{{ genre.name }}</button>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

                <button class="search-button">Search</button>
            </aside>

            <!-- Movies Grid -->
            <main class="movies-section">
                <h2 class="section-title">Popular Movies</h2>
                
                {% if error %}
                <div style="background-color: #fff3cd; border: 1px solid #ffc107; padding: 20px; border-radius: 8px; margin-bottom: 20px; color: #856404;">
                    <strong>‚ö†Ô∏è Error:</strong> {{ error }}
                    <br><small>Please check your internet connection and try again.</small>
                </div>
                {% endif %}
                
                {% if not movies and not error %}
                <p style="color: #666; font-size: 18px; margin-top: 40px;">No movies available at the moment.</p>
                {% endif %}
                
                <div class="movies-grid" id="moviesGrid">
                    {% for movie in movies %}
                    <div class="movie-card">
                        <a href="/movie/{{ movie.id }}" class="movie-link">
                            <div class="movie-poster">
                                {% if movie.poster_path %}
                                <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" 
                                     alt="{{ movie.title }}"
                                     loading="lazy">
                                {% else %}
                                <div class="no-image">No Image</div>
                                {% endif %}
                                <div class="rating-badge">
                                    <svg class="rating-circle" viewBox="0 0 36 36">
                                        <path class="circle-bg"
                                            d="M18 2.0845
                                            a 15.9155 15.9155 0 0 1 0 31.831
                                            a 15.9155 15.9155 0 0 1 0 -31.831"
                                            fill="none"
                                            stroke="#204529"
                                            stroke-width="3"/>
                                        <path class="circle"
                                            d="M18 2.0845
                                            a 15.9155 15.9155 0 0 1 0 31.831
                                            a 15.9155 15.9155 0 0 1 0 -31.831"
                                            fill="none"
                                            stroke="#21d07a"
                                            stroke-width="3"
                                            stroke-dasharray="{{ (movie.vote_average * 10)|int }}, 100"/>
                                    </svg>
                                    <div class="rating-text">{{ (movie.vote_average * 10)|int }}<sup>%</sup></div>
                                </div>
                            </div>
                            <div class="movie-info">
                                <h3 class="movie-title">{{ movie.title }}</h3>
                                <p class="movie-date">{{ movie.release_date }}</p>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </main>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
